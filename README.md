# Ornament Drawer

<h3>---------------------------Just for fun-------------------------</h3>

- Java 17
- Spring Core

My program that generates images like this:

![orn_85lojetbdhkfotvopntqxfdihwfqbn.png](orn_85lojetbdhkfotvopntqxfdihwfqbn.png)

Edit configuration file ./src/main/resources/[app.properties](src%2Fmain%2Fresources%2Fapp.properties) to change settings

---

## С чего все началось

В жизни у меня было много разных хобби:
- рисование, 
- вышивание лентами, 
- вышивание крестиком,
- создание заколок,
- 3D-моделирование одежды и мебели
- создание пользовательского контента для The Sims
- квиллинг
- макияж
- ногти
- ...

И наконец, я решила купить **швейную машинку**, чтобы шить себе в первую очередь домашний текстиль и всевозможные косметички/органайзеры

---

Насмотревшись Pinterest(мой давний друг), решила я сшить себе чехол на декоративную подушку в технике лоскутного шитья

<h3>Но какой именно?</h3>

<i>Этого я не знала...</i>

<h3>Но хочется</h3>

---

<i>Ну-с, начнем</i>:

- Для начала определимся с палитрой:

<i>Хочется чего-то нейтрального, что ассоциировалось бы с природными оттенками... 

Ищем...

Находим
![1685683771_gagaru-club-p-korichnevii-tsvet-vkontakte-49.jpg](1685683771_gagaru-club-p-korichnevii-tsvet-vkontakte-49.jpg)

Ищем ткани...

Находим:</i>

![fdxtHW8YC_c.jpg](fdxtHW8YC_c.jpg)

<i>
Очень приятная на ощупь ткань - искуственная замша, но придется с ней немного повозиться:
</i>

- следить за направлением ворса при раскрое

- не делать машинных строчек по лицевой части, потому что ворс очень скользит и ткань не будет двигаться зубчиками на пластинке машины

---
## Пора определиться с орнаментом...
_И это оказалось самым сложным_

Меня вдохновляло японское лоскутное шитье, но мне не хотелось использовать ткань с узором, к тому же такие тонкие хлопчатобумажные ткани не очень практичны


![9dc2455038955744c60d955bd686d8fb.png](9dc2455038955744c60d955bd686d8fb.png)

Хотелось чего-то более минималистичного, но стандартные схемы пэтчворка(лоскутного шитья) казались слишком скучными, а некоторые - нелепыми

![19bf6f6c210a1bdf584391e07d0c33f2.jpg](19bf6f6c210a1bdf584391e07d0c33f2.jpg)

Я уже почти отчаялась, но мне попался такой узор:

![daec0f4c9072694865a8fb83a9b5e80c.jpg](daec0f4c9072694865a8fb83a9b5e80c.jpg)

_И я поняла, чего я хочу_

---

## Орнамент "Французская елка"

_вернее схема раскладки паркета_

Выглядит вот так:

![Shema-elka (11) (1).png](Shema-elka%20%2811%29%20%281%29.png)

_"Осталось вбить в гугл - и я найду какой-то похожий орнамент из лоскутков ткани"_ - подумала я

#### _Но нет_

Ничего похожего я не нашла

#### Может помогут нейросети?

## Тоже нет

![27b3d842d3e64eb18948e8afd422a197_00000.jpg](27b3d842d3e64eb18948e8afd422a197_00000.jpg)

_Я мучила несколько нейросетей, но ни одна из них искренне не знала, что такое "схема раскладки паркета Французская елка"_

---
## Ну, значит пора писать код
Вооружившись генератором случайных чисел, python-ом и pygame-ом, ~~а так же бубном для танцев, затем валерьянкой,~~ я приступила к работе

Получаю что-то такое

![Снимок экрана 2024-03-07 в 00.50.12.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2000.50.12.png)

Соседние кусочки одинакового цвета - непорядок, исправляем, подключая извилины и алгоритмы
- проверяем, что в "**двумерной окрестности фон Не́ймана порядка 1**" клетки нет клеток такого же цвета, иначе берем другой случайный цвет (на самом деле проверяем только ту, что сверху и ту, что слева, т.к. генерируем случайный цвет итеративно)

![Nbhd_neumann_1.png](Nbhd_neumann_1.png)

Получаем это:

![Снимок экрана 2024-03-07 в 01.11.09.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2001.11.09.png)

Уже гораздо лучше, но при генерации не получается получить узор, достаточно равномерный по распределению цветов, но при этом без повторений, которые бросаются в глаза

![same.png](same.png)

Значит пора подумать над этим, и т.к. код уже разрастается, то лучше бы переписать это на java и включить в свои pet-проекты (=

---
## Java 

Поразмыслив над предыдущим вопросом, одновременно переписывая свой код с python на java, мне пришла мысль, что нужно:

- Добавить статистику по цветам в виде количества разных форм узора для каждого цвета. Напоминаю: ткань, из которой я собираюсь сшить чехол, имеет ворс с определенным направлением и является односторонней. Так что необходимо различать четные и нечетные параллелограммы(хотя по расчетам это вполне себе ромбы с острым углом в 45 градусов), чтобы правильно раскроить (разрезать на кусочки) ткань.
- Добавить кнопки для регенерации узора и сохранения его со статистикой (ранее для этого использовались просто клавиши 'пробел' и 'S' соответственно)
- Добавить конфигурацию из .properties файла с последующей валидацией
- Ну и собственно решила, как я буду разбираться с "недостаточно случайным" для моей чувствительной творческой натуры узором

_Последнее привело к такому, особое внимание прошу обратить на название методов: (очень страшно)_ 


    public boolean checkVerticalOnHorizontalPairsManyRepeats() {
        for (int row = 1; row < entry.length; row++) {
            List<int[]> levelPairs = new ArrayList<>();
            for (int j = 0; j < entry[0].length; j++) {
                levelPairs.add(new int[]{entry[row - 1][j], entry[row][j]});
            }
            if (checkEqualPairs(levelPairs)) {
                return true;
            }
        }
        return false;
    }

    public boolean checkOneVerticalPairsManyRepeats() {
        int colIndex = 0;

        while (colIndex < entry[0].length) {
            List<int[]> levelPairs = new ArrayList<>();
            for (int i = 1; i < entry.length; i += 2) {
                levelPairs.add(
                        new int[]{entry[i - 1][colIndex], entry[i][colIndex]});
            }
            if (checkEqualPairs(levelPairs)) {
                return true;
            }
            levelPairs = new ArrayList<>();
            for (int i = entry.length - 1; i > 0; i -= 2) {
                levelPairs.add(
                        new int[]{entry[i - 1][colIndex], entry[i][colIndex]});
            }
            if (checkEqualPairs(levelPairs)) {
                return true;
            }
            colIndex++;
        }
        return false;
    }

    public boolean checkHorizontalPairsManyRepeats() {
        for (int[] ints : entry) {
            List<int[]> levelPairs = new ArrayList<>();
            for (int j = 1; j < entry[0].length; j += 2) {
                levelPairs.add(new int[]{ints[j - 1], ints[j]});
            }
            if (checkEqualPairs(levelPairs)) {
                return true;
            }
        }
        return false;
    }

![fit=contain,width=1011,height=700.webp](fit%3Dcontain%2Cwidth%3D1011%2Cheight%3D700.webp)

_"Я - великий грешник и у всех прошу прощения."_

Нынешний вид приложения выглядит как-то так:

![Снимок экрана 2024-03-07 в 17.51.26.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2017.51.26.png)

в целом, меня это устраивает, генерация неплоха, к тому же статистика исчерпывающая:

    Light Beige:
    fullLeft=3, fullRight=4, halfLeftUp=1, halfRightUp=0, halfLeftBottom=0, halfRightBottom=2
    
    Dark Beige:
    fullLeft=2, fullRight=6, halfLeftUp=2, halfRightUp=0, halfLeftBottom=0, halfRightBottom=2
    
    Light Brown:
    fullLeft=6, fullRight=1, halfLeftUp=0, halfRightUp=3, halfLeftBottom=1, halfRightBottom=0
    
    Dark Brown:
    fullLeft=3, fullRight=4, halfLeftUp=1, halfRightUp=1, halfLeftBottom=1, halfRightBottom=0
    
    Green:
    fullLeft=6, fullRight=5, halfLeftUp=0, halfRightUp=0, halfLeftBottom=2, halfRightBottom=0


---

### Вернемся к ~~нашим баранам~~ подушке:

Так как наступили новогодние каникулы, и я уехала далеко от швейной машины и ткани, а ~~заниматься изучением джавы и довольно уныло~~ хочется представить, как будет выглядеть финальное изделие, я расчехляю...

## Marvelous Designer

Лучшее приложение, которое я видела

_*Marvelous Designer – это программа моделирования, симуляции и анимации одежды. В этой программе с нуля можно создать одежду и текстиль любой сложности. Пройдя длинный путь от простенького генератора ткани, сейчас эта программа заслуженно занимает флагманский олимп среди программ симуляции одежды._


Рисуем 2 квадратика, "сшиваем" их, запускаем симуляцию:
![Снимок экрана 2024-03-07 в 18.08.34.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2018.08.34.png)

Получается плоский чехольчик, добавляем давление:

![Снимок экрана 2024-03-07 в 18.13.31.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2018.13.31.png)

### Получаем уже подушку:

![Снимок экрана 2024-03-07 в 18.13.50.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2018.13.50.png)

_Но узор какой-то плоский, все-таки это должно выглядеть, как сшитые кусочки_

___

## Карта нормалей

_***Карты нормалей** – это RGB изображения, где каждый из каналов (красный, зелёный, синий) интерпретируется в X, Y и Z координаты нормалей поверхности соответственно. Красный канал пространства касательных карты нормалей отвечает за ось X (нормали направленны влево или вправо), зелёный канал за ось Y (нормали направлены вверх или вниз) и синий канал за ось Z (нормали направлены прямо от поверхности)._

![630cc59d6020030608239013dcd14ff5.jpeg](630cc59d6020030608239013dcd14ff5.jpeg)

Не буду описывать в деталях, как рисовать/генерировать карты нормалей, так как это просто README для моего проекта, а не обучающее пособие, в интернете полно уроков по этому вопросу.

Я просто нарисовала карту нормалей в Photoshop методом проб и ошибок, получилось так:

![123.png](123.png)

И подушка с картой нормалей выглядит так:

![Снимок экрана 2024-03-07 в 18.29.19.png](%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-03-07%20%D0%B2%2018.29.19.png)

_Красиво, я собой довольна (=_

---

## Финально:

После нескольких вечеров раскроя и шитья получилось это:

![IMG_0089.png](IMG_0089.png)

### _Спасибо всем, кто это прочитал(если такие есть)_

